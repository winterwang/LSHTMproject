---
title: Tables in the project
mainfont: Arial
fontsize: 11pt
geometry: margin=0.8in
author:  
output: 
  pdf_document: 
    keep_tex: true
    number_sections: true
    latex_engine: xelatex
    # includes:  
    #   in_header: preamble-latex.tex
classoption: a4paper
---



```{r echo=FALSE, message=FALSE, warning=FALSE}
library(knitr)
library(kableExtra)
dt <- read.csv("/home/wangcc-me/Documents/LSHTMproject/Tablecsv/CW2CB2results.csv", header = T, row.names = NULL, colClasses = "character")
names(dt) <- c("Variables", "Latent class = 1", "Latent class = 2", "P value [note]")

dt[28, 1] <- c("Hypertension (%) [note]")
dt[32, 1] <- c("Carbohydrate\npercent (%) [note]")
dt[35, 1] <- c("DM [note]")
dt[36, 1] <- c("Physical\nactivity (hours/day) [note]")


kable(dt,  align = "l", row.names = FALSE,
              format = "latex", caption = "Means, percentages, and 95 percent CIs of the characteristics by latent class memberships in the UK adults (NDNS RP 2008/09-2015/16, sample size = 6155).", 
      booktabs = T,linesep = "") %>%
 kable_styling(latex_options = c("striped"), font_size = 9) %>% 
  add_indent(c(3:6, 9, 10, 12:19, 23:25, 27, 29)) %>% 
  footnote(general = c("Abbreviations: CI, confidence intervals; NDNS RP, national dietary and nutrition survey", 
                       "rolling programme; BMI body mass index; WC, waist circumference; A1C, haemoglobin A1c;", 
                       "DM, diabetes mellitus.", 
                       "Variables from the blood tests (glucose and A1C) are weighted by blood sample weights,", 
                       "the others are weighted by individual weights.", 
                       "Glucose and A1C levels are estimated in subgroups of people without diabetes.")) %>% 
  add_footnote(c("For continuous variables, the F test was used to determine differences between latent classes. For categorical variables, differences between latent classes were assessed using the adjusted Pearson Chi-2 test for survey data.",
                 "Hypertension was defined as either systolic blood pressure >= 140 mmHg or diastolic blood pressure >= 90 mmHg, or under treatment for hypertension.", 
                 "Carbohydrate percent indicates the percentage of energy from carbohydrate in total energy intake",
                 "DM was defined by A1C > 6.5%.", 
                 "Physical activity was calculated as mean time spent at moderate or vigorous physical activity during the survey."), 
               notation = "symbol")
```


```{r echo=FALSE, message=FALSE, warning=FALSE}
# library(kableExtra)
dt <- read.csv("/home/wangcc-me/Documents/LSHTMproject/Tablecsv/ndns_level1only.csv", header = T)
names(dt) <- c("N of classes", "N of free parameters","log-likelihood",  "AIC", "BIC", "aBIC", "Entropy", "Lo-Mendel-Rubin LRT")
dt[1,8] <- "--"
dt[2,8] <- "< 0.0001"
dt[3,8] <- "< 0.0001"
kable(dt, digits = 3, row.names = FALSE, align = "c",
              format = "latex", caption = "Level 1 class selection. (All data, n = 6155, 24483 data points)", 
      booktabs = T,linesep = "") %>%
 kable_styling(latex_options = c("striped"), font_size = 9) %>% 
# row_spec(c(2,3), bold = T, color = "white", background = "#D7261E") %>% 
  footnote(general = c("Abbreviation: N, number; AIC, Akaike information criterion; BIC, Bayesian information criterion; aBIC, adjusted BIC;" ,
                       "Entropy, a pseudo-r-squared index; Lo-Mendel-Rubin LRT, likelihood ratio test comparing q classes models with", 
                       "q-1 classes models."))
```



```{r echo=FALSE, message=FALSE, warning=FALSE}
dt <- read.csv("/home/wangcc-me/Documents/LSHTMproject/Tablecsv/LCGA3Cresults.csv", header = T, row.names = NULL, colClasses = "character")
names(dt) <- c("Variables", "Latent class = 1", "Latent class = 2", "Latent class = 3", "P value [note]")


dt[28, 1] <- c("Hypertension (%) [note]")
dt[32, 1] <- c("Carbohydrate\npercent (%) [note]")
dt[35, 1] <- c("DM [note]")
dt[36, 1] <- c("Physical\nactivity (hours/day) [note]")


kable(dt,  align = "l", row.names = FALSE,
              format = "latex", caption = "Means, percentages, and 95 percent CIs of the characteristics by latent class memberships in the UK adults (NDNS RP 2008/09-2015/16, sample size = 6155).", 
      booktabs = T,linesep = "") %>%
 kable_styling(latex_options = c("striped"), font_size = 9) %>% 
  add_indent(c(3:6, 9, 10, 12:19, 23:25, 27, 29)) %>% 
   footnote(general = c("Abbreviations: CI, confidence intervals; NDNS RP, national dietary and nutrition survey", 
                       "rolling programme; BMI body mass index; WC, waist circumference; A1C, haemoglobin A1c;", 
                       "DM, diabetes mellitus.", 
                       "Variables from the blood tests (glucose and A1C) are weighted by blood sample weights,", 
                       "the others are weighted by individual weights.", 
                       "Glucose and A1C levels are estimated in subgroups of people without diabetes.")) %>% 
  add_footnote(c("For continuous variables, the F test was used to determine differences between latent classes with Bonferroni correction to account for multiple testing across >2 classes. For categorical variables, differences between latent classes were assessed using the adjusted Pearson Chi-2 test for survey data.",
                 "Hypertension was defined as either systolic blood pressure >= 140 mmHg or diastolic blood pressure >= 90 mmHg, or under treatment for hypertension.", 
                 "Carbohydrate percent indicates the percentage of energy from carbohydrate in total energy intake",
                 "DM was defined by A1C > 6.5%.", 
                 "Physical activity was calculated as mean time spent at moderate or vigorous physical activity during the survey."), 
               notation = "symbol")
```






```{r echo=FALSE, message=FALSE, warning=FALSE}
dt <- read.csv("/home/wangcc-me/Documents/LSHTMproject/Tablecsv/Mixed_50_paper.csv", header = T)
names(dt) <- c("Model", "1 class", "2 classes",  "3 classes", "4 classes", "5 classes")
dt[is.na(dt)] <- ""
# library(formattable)

kable(dt, digits = 3, row.names = FALSE, align = "c",
      format = "latex", caption = "Fit Criteria for Each Model Specification", 
      booktabs = T, linesep = "") %>% 
  kable_styling(latex_options = c("striped"), font_size = 9) %>% 
  add_header_above(c(" ", "Number of level 1 classes" = 5)) %>% 
  group_rows("Fixed effects model", 1, 5) %>%
  group_rows("Random effects model", 6, 20) %>%
  add_indent(c(2:5,7:10,12:15,17:20)) %>% 
  footnote(general = c("Abbreviation: No, number; BIC, Bayesian information criterion; Entropy, a pseudo-r-squared index; Lo-Mendel-Rubin LRT, likelihood ratio test comparing q classes models with q-1 classes models."))

```
